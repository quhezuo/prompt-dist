import{_ as N,a as j,u as F,c as h,m as $,r as C,d as a,e,f as k,F as q,j as z,t as i,w as E,q as b,v as w,l as r,i as H}from"./index-BJiyRC3O.js";const I={class:"categories-view"},L={class:"categories-container"},P={class:"categories-list"},T={key:0,class:"empty-state"},U={key:1,class:"category-items"},A={class:"category-info"},G={class:"category-name"},J={class:"prompt-count"},K={class:"category-actions"},O=["onClick"],Q=["onClick","disabled"],R={class:"category-form"},W={class:"form-group"},X={class:"form-group"},Y={class:"color-picker-container"},Z={class:"color-value"},ee={class:"form-actions"},oe={key:0,class:"delete-confirm-dialog"},te={class:"dialog-content"},se={key:0,class:"error-message"},le={class:"dialog-actions"},ne=["disabled"],ae={__name:"ManageCategoriesView",setup(ie){const c=j(),x=F(),m=h(()=>c.categories),t=$({id:null,name:"",color:"#3498db"}),v=h(()=>t.id!==null),u=C(!1),l=C(null);function d(n){return x.prompts.filter(o=>o.categoryId===n).length}function V(n){t.id=n.id,t.name=n.name,t.color=n.color}function M(n){l.value=n,u.value=!0}function S(){l.value&&(c.deleteCategory(l.value.id),u.value=!1,l.value=null)}function B(){v.value?c.updateCategory({id:t.id,name:t.name,color:t.color}):c.addCategory({name:t.name,color:t.color}),p()}function p(){t.id=null,t.name="",t.color="#3498db"}return(n,o)=>{var g,f,_,y;return r(),a("div",I,[o[11]||(o[11]=e("div",{class:"page-header"},[e("div",{class:"header-content"},[e("h1",{class:"title"},"分类管理"),e("p",{class:"description"},"管理提示词的分类，便于组织和查找")])],-1)),e("div",L,[e("div",P,[o[6]||(o[6]=e("h2",null,"现有分类",-1)),m.value.length===0?(r(),a("div",T,o[3]||(o[3]=[e("p",null,"暂无分类，请添加新分类",-1)]))):(r(),a("ul",U,[(r(!0),a(q,null,z(m.value,s=>(r(),a("li",{key:s.id,class:"category-item"},[e("div",A,[e("div",{class:"category-color",style:H({backgroundColor:s.color})},null,4),e("span",G,i(s.name),1),e("span",J,i(d(s.id))+" 个提示词",1)]),e("div",K,[e("button",{class:"btn-edit",onClick:D=>V(s)},o[4]||(o[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]),8,O),e("button",{class:"btn-delete",onClick:D=>M(s),disabled:d(s.id)>0},o[5]||(o[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)]),8,Q)])]))),128))]))]),e("div",R,[e("h2",null,i(v.value?"编辑分类":"添加新分类"),1),e("form",{onSubmit:E(B,["prevent"])},[e("div",W,[o[7]||(o[7]=e("label",{for:"categoryName"},"分类名称",-1)),b(e("input",{type:"text",id:"categoryName","onUpdate:modelValue":o[0]||(o[0]=s=>t.name=s),required:"",placeholder:"输入分类名称"},null,512),[[w,t.name]])]),e("div",X,[o[8]||(o[8]=e("label",{for:"categoryColor"},"分类颜色",-1)),e("div",Y,[b(e("input",{type:"color",id:"categoryColor","onUpdate:modelValue":o[1]||(o[1]=s=>t.color=s),class:"color-picker"},null,512),[[w,t.color]]),e("span",Z,i(t.color),1)])]),e("div",ee,[e("button",{type:"button",class:"btn-cancel",onClick:p},i(v.value?"取消":"重置"),1),o[9]||(o[9]=e("button",{type:"submit",class:"btn-save"}," 保存 ",-1))])],32)])]),u.value?(r(),a("div",oe,[e("div",te,[o[10]||(o[10]=e("h3",null,"确认删除",-1)),e("p",null,'确定要删除分类 "'+i((g=l.value)==null?void 0:g.name)+'" 吗？',1),d(((f=l.value)==null?void 0:f.id)||0)>0?(r(),a("p",se," 该分类下有 "+i(d(((_=l.value)==null?void 0:_.id)||0))+" 个提示词，无法删除。 ",1)):k("",!0),e("div",le,[e("button",{class:"btn-cancel",onClick:o[2]||(o[2]=s=>u.value=!1)},"取消"),e("button",{class:"btn-confirm",onClick:S,disabled:d(((y=l.value)==null?void 0:y.id)||0)>0}," 删除 ",8,ne)])])])):k("",!0)])}}},de=N(ae,[["__scopeId","data-v-4e0f6500"]]);export{de as default};
