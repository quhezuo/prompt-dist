import{_ as V,u as B,a as D,z as M,r,c as N,o as O,d as a,e as t,f as p,q as A,s as E,p as x,A as I,t as y,l as d}from"./index-BJiyRC3O.js";const R={class:"settings-view"},U={class:"settings-container"},_={class:"settings-section"},J={class:"setting-item"},L={class:"setting-control"},H={class:"settings-section"},P={class:"setting-item"},$={class:"setting-control"},q={class:"settings-section"},z={class:"setting-item"},F={class:"setting-info"},G={class:"setting-description"},K={key:0,class:"confirm-dialog"},Q={class:"dialog-content"},W={class:"dialog-actions"},X={key:1,class:"toast-message success"},Y={key:2,class:"toast-message success"},Z={key:3,class:"toast-message error"},tt={__name:"SettingsView",setup(et){const v=B(),g=D(),m=M(),k=r("1.0.0"),w=N({get:()=>m.theme,set:i=>m.setTheme(i)}),c=r(!1),f=r(!1),h=r(!1),o=r(!1),l=r("");O(()=>{});function b(){m.setTheme(w.value)}function S(){try{const i={prompts:v.prompts,categories:g.categories,version:k.value,exportDate:new Date().toISOString()},e=JSON.stringify(i,null,2),n=new Blob([e],{type:"application/json"}),u=URL.createObjectURL(n),s=document.createElement("a");s.href=u,s.download=`prompt-pro-export-${new Date().toISOString().slice(0,10)}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(u),h.value=!0,setTimeout(()=>{h.value=!1},3e3)}catch(i){console.error("导出数据失败:",i),l.value="导出数据失败",o.value=!0,setTimeout(()=>{o.value=!1},3e3)}}function C(i){const e=i.target.files[0];if(!e)return;const n=new FileReader;n.onload=u=>{try{const s=JSON.parse(u.target.result);if(!s.prompts||!s.categories)throw new Error("无效的数据格式");g.importCategories(s.categories),v.importPrompts(s.prompts),i.target.value="",f.value=!0,setTimeout(()=>{f.value=!1},3e3)}catch(s){console.error("导入数据失败:",s),l.value="导入数据失败: "+s.message,o.value=!0,setTimeout(()=>{o.value=!1},3e3)}},n.onerror=()=>{l.value="读取文件失败",o.value=!0,setTimeout(()=>{o.value=!1},3e3)},n.readAsText(e)}function T(){c.value=!0}function j(){try{v.clearAllPrompts(),g.clearAllCategories(),c.value=!1,l.value="所有数据已清除",o.value=!0,setTimeout(()=>{o.value=!1},3e3)}catch(i){console.error("清除数据失败:",i),l.value="清除数据失败",o.value=!0,setTimeout(()=>{o.value=!1},3e3)}}return(i,e)=>(d(),a("div",R,[e[21]||(e[21]=t("div",{class:"page-header"},[t("div",{class:"header-content"},[t("h1",{class:"title"},"设置"),t("p",{class:"description"},"管理应用程序的全局设置和数据")])],-1)),t("div",U,[t("div",_,[e[4]||(e[4]=t("h2",{class:"section-title"},"外观",-1)),t("div",J,[e[3]||(e[3]=t("div",{class:"setting-info"},[t("h3",{class:"setting-title"},"主题"),t("p",{class:"setting-description"},"选择应用程序的显示主题")],-1)),t("div",L,[A(t("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>w.value=n),onChange:b,class:"theme-select"},e[2]||(e[2]=[t("option",{value:"system"},"跟随系统",-1),t("option",{value:"light"},"浅色",-1),t("option",{value:"dark"},"深色",-1)]),544),[[E,w.value]])])])]),t("div",H,[e[11]||(e[11]=t("h2",{class:"section-title"},"数据管理",-1)),t("div",{class:"setting-item"},[e[6]||(e[6]=t("div",{class:"setting-info"},[t("h3",{class:"setting-title"},"导出数据"),t("p",{class:"setting-description"},"将所有提示词和分类导出为JSON文件")],-1)),t("div",{class:"setting-control"},[t("button",{onClick:S,class:"btn-action"},e[5]||(e[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),x(" 导出数据 ")]))])]),t("div",P,[e[8]||(e[8]=t("div",{class:"setting-info"},[t("h3",{class:"setting-title"},"导入数据"),t("p",{class:"setting-description"},"从JSON文件导入提示词和分类")],-1)),t("div",$,[e[7]||(e[7]=I('<label for="import-file" class="btn-action" data-v-3eb8b9d0><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-3eb8b9d0><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" data-v-3eb8b9d0></path><polyline points="17 8 12 3 7 8" data-v-3eb8b9d0></polyline><line x1="12" y1="3" x2="12" y2="15" data-v-3eb8b9d0></line></svg> 导入数据 </label>',1)),t("input",{type:"file",id:"import-file",accept:".json",onChange:C,class:"file-input"},null,32)])]),t("div",{class:"setting-item"},[e[10]||(e[10]=t("div",{class:"setting-info"},[t("h3",{class:"setting-title"},"清除所有数据"),t("p",{class:"setting-description"},"删除所有提示词和分类数据（此操作不可撤销）")],-1)),t("div",{class:"setting-control"},[t("button",{onClick:T,class:"btn-danger"},e[9]||(e[9]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),x(" 清除数据 ")]))])])]),t("div",q,[e[13]||(e[13]=t("h2",{class:"section-title"},"关于",-1)),t("div",z,[t("div",F,[e[12]||(e[12]=t("h3",{class:"setting-title"},"版本",-1)),t("p",G,"当前版本: "+y(k.value),1)])]),e[14]||(e[14]=t("div",{class:"setting-item"},[t("div",{class:"setting-info"},[t("h3",{class:"setting-title"},"开源协议"),t("p",{class:"setting-description"},"本应用基于 MIT 协议开源")])],-1))])]),c.value?(d(),a("div",K,[t("div",Q,[e[15]||(e[15]=t("h3",null,"确认清除所有数据",-1)),e[16]||(e[16]=t("p",null,"此操作将删除所有提示词和分类数据，且不可恢复。",-1)),e[17]||(e[17]=t("p",null,"建议在清除前先导出数据备份。",-1)),t("div",W,[t("button",{onClick:e[1]||(e[1]=n=>c.value=!1),class:"btn-cancel"},"取消"),t("button",{onClick:j,class:"btn-confirm"},"确认清除")])])])):p("",!0),f.value?(d(),a("div",X,e[18]||(e[18]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t("polyline",{points:"22 4 12 14.01 9 11.01"})],-1),t("span",null,"数据导入成功",-1)]))):p("",!0),h.value?(d(),a("div",Y,e[19]||(e[19]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t("polyline",{points:"22 4 12 14.01 9 11.01"})],-1),t("span",null,"数据导出成功",-1)]))):p("",!0),o.value?(d(),a("div",Z,[e[20]||(e[20]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),t("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),t("span",null,y(l.value),1)])):p("",!0)]))}},ot=V(tt,[["__scopeId","data-v-3eb8b9d0"]]);export{ot as default};
