import{_ as U,u as $,a as q,r as d,o as G,b as J,c as k,d as a,e as t,f as u,t as r,F as _,g as c,h as o,n as K,i as Q,j as V,k as W,l as i}from"./index-BJiyRC3O.js";const X={class:"prompt-detail-view"},Y={class:"container"},Z={key:0,class:"loading-container"},tt={key:1,class:"error-container"},et={class:"detail-header"},st={class:"header-actions"},ot={class:"detail-content"},nt={class:"prompt-header"},lt={class:"prompt-title"},at={class:"prompt-content-card"},it={class:"card-header"},rt={class:"prompt-content"},ct={key:0,class:"examples-section"},dt={class:"examples-grid"},ut={class:"example-image-container"},vt=["src","alt","onClick"],pt={key:0,class:"example-description"},gt={key:1,class:"tags-section"},ht={class:"tags-container"},mt={class:"usage-section"},wt={class:"usage-stats"},kt={class:"stat-item"},_t={class:"stat-value"},yt={class:"stat-item"},ft={class:"stat-value"},bt={class:"stat-item"},Ct={class:"stat-value"},xt={class:"image-viewer-content"},It=["src"],Bt={key:4,class:"dialog-overlay"},Vt={class:"dialog-content"},jt={class:"dialog-actions"},Dt={__name:"PromptDetailView",setup(Pt){const j=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[o("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),o("polyline",{points:"12 19 5 12 12 5"})]),D=({filled:n})=>o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:n?"currentColor":"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[o("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})]),y=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[o("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),o("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]),P=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[o("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),o("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]),F=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[o("polyline",{points:"3 6 5 6 21 6"}),o("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),o("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),o("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]),L=()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[o("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]),M=J(),h=W(),v=$(),S=q(),p=d(!0),g=d(null),s=d(null),m=d(!1),f=d(""),w=d(!1);G(()=>{const n=M.params.id;if(!n){g.value="提示词ID不存在",p.value=!1;return}const e=v.getPromptById(n);if(!e){g.value="未找到该提示词",p.value=!1;return}s.value=e,p.value=!1});const b=k(()=>s.value?S.getCategoryById(s.value.categoryId)||{name:"未分类",color:"#888888"}:{name:"未分类",color:"#888888"}),z=k(()=>{var n;return((n=s.value)==null?void 0:n.examples)&&s.value.examples.length>0}),H=k(()=>{var n;return((n=s.value)==null?void 0:n.tags)&&s.value.tags.length>0}),C=n=>n?new Date(n).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"未知",x=()=>{h.back()},N=()=>{s.value&&v.toggleFavorite(s.value.id)},I=()=>{s.value&&(navigator.clipboard.writeText(s.value.content),v.incrementUsage(s.value.id))},A=()=>{s.value&&h.push({name:"edit-prompt",params:{id:s.value.id}})},E=n=>{n&&(f.value=n,m.value=!0)},B=()=>{m.value=!1},T=()=>{w.value=!0},O=()=>{if(!s.value)return;v.deletePrompt(s.value.id)&&h.push({name:"home"})};return(n,e)=>(i(),a("div",X,[t("div",Y,[p.value?(i(),a("div",Z,e[1]||(e[1]=[t("div",{class:"loading"},null,-1),t("p",null,"加载中...",-1)]))):g.value?(i(),a("div",tt,[e[2]||(e[2]=t("div",{class:"error-icon"},"!",-1)),e[3]||(e[3]=t("h2",null,"提示词未找到",-1)),t("p",null,r(g.value),1),t("button",{class:"button",onClick:x},"返回")])):(i(),a(_,{key:2},[t("div",et,[t("button",{class:"back-button",onClick:x},[c(j),e[4]||(e[4]=t("span",null,"返回",-1))]),t("div",st,[t("button",{class:K(["action-button favorite-button",{"is-favorite":s.value.isFavorite}]),onClick:N,title:"收藏"},[c(D,{filled:s.value.isFavorite},null,8,["filled"])],2),t("button",{class:"action-button",onClick:I,title:"复制提示词"},[c(y)]),t("button",{class:"action-button",onClick:A,title:"编辑提示词"},[c(P)]),t("button",{class:"action-button delete-button",onClick:T,title:"删除提示词"},[c(F)])])]),t("div",ot,[t("div",nt,[t("h1",lt,r(s.value.title),1),t("div",{class:"category-badge",style:Q({backgroundColor:b.value.color})},r(b.value.name),5)]),t("div",at,[t("div",it,[e[6]||(e[6]=t("h2",{class:"card-title"},"提示词内容",-1)),t("button",{class:"copy-button",onClick:I},[c(y),e[5]||(e[5]=t("span",null,"复制",-1))])]),t("div",rt,r(s.value.content),1)]),z.value?(i(),a("div",ct,[e[7]||(e[7]=t("h2",{class:"section-title"},"生成示例",-1)),t("div",dt,[(i(!0),a(_,null,V(s.value.examples,(l,R)=>(i(),a("div",{key:R,class:"example-card"},[t("div",ut,[t("img",{src:typeof l=="string"?l:l.imageUrl,alt:typeof l=="object"&&l.description?l.description:"提示词示例",class:"example-image",onClick:Ft=>E(typeof l=="string"?l:l.imageUrl)},null,8,vt)]),typeof l=="object"&&l.description?(i(),a("p",pt,r(l.description),1)):u("",!0)]))),128))])])):u("",!0),H.value?(i(),a("div",gt,[e[8]||(e[8]=t("h2",{class:"section-title"},"标签",-1)),t("div",ht,[(i(!0),a(_,null,V(s.value.tags,l=>(i(),a("span",{key:l,class:"tag"},r(l),1))),128))])])):u("",!0),t("div",mt,[e[12]||(e[12]=t("h2",{class:"section-title"},"使用情况",-1)),t("div",wt,[t("div",kt,[e[9]||(e[9]=t("span",{class:"stat-label"},"创建时间",-1)),t("span",_t,r(C(s.value.createdAt)),1)]),t("div",yt,[e[10]||(e[10]=t("span",{class:"stat-label"},"最后修改",-1)),t("span",ft,r(C(s.value.updatedAt)),1)]),t("div",bt,[e[11]||(e[11]=t("span",{class:"stat-label"},"使用次数",-1)),t("span",Ct,r(s.value.usageCount)+" 次",1)])])])])],64)),m.value?(i(),a("div",{key:3,class:"image-viewer",onClick:B},[t("div",xt,[t("img",{src:f.value,alt:"大图预览",class:"viewer-image"},null,8,It),t("button",{class:"close-button",onClick:B},[c(L)])])])):u("",!0),w.value?(i(),a("div",Bt,[t("div",Vt,[e[13]||(e[13]=t("h3",{class:"dialog-title"},"确认删除",-1)),e[14]||(e[14]=t("p",{class:"dialog-message"}," 您确定要删除这个提示词吗？此操作无法撤销。 ",-1)),t("div",jt,[t("button",{class:"button secondary",onClick:e[0]||(e[0]=l=>w.value=!1)}," 取消 "),t("button",{class:"button delete-button",onClick:O}," 删除 ")])])])):u("",!0)])]))}},Mt=U(Dt,[["__scopeId","data-v-94a9d8d7"]]);export{Mt as default};
